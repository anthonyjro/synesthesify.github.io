(this.webpackJsonpsynesthesify=this.webpackJsonpsynesthesify||[]).push([[0],{112:function(e,t,a){},143:function(e,t){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(98),o=a.n(c),i=(a(112),a(102)),s=a(7),r=a(3),l=a(2),d=a(202),u=a(101),b=a(205),j=a(203),f=a(201),h=a(199),p=a(204),O=a(200),g=a(206),v=(a(81),a(80)),m=a(13),x=a(37),y=a(38),k=Object(x.a)((function e(){Object(y.a)(this,e),this.g2D={tangerine:["#fa6e6e","#fb7262","#fb7757","#fc7b4b","#fd7f3f","#fe8333","#fe8828","#ff8c1c"],green_apple:["#7bfa6e","#6dfb80","#60fb92","#52fca4","#45fdb6","#37fec8","#2afeda","#1cffec"],blue_razz:["#6efaf5","#68daf6","#63bbf8","#5d9bf9","#587bfb","#525bfc","#4d3cfe","#471cff"],rainbow:["#fb813f","#fafb40","#75fb7e","#00ffde","#9e7bde","#fc45ba","#fc4646"]},this.g3D={rainbow:["#fb813f","#fafb40","#75fb7e","#00ffde","#9e7bde","#fc45ba","#fc4646"],hot_n_cold:["#f26601","#eb822e","#d9ddc7","#a2d4d0","#66cbdf"]}})),w=a(48),S=a.n(w),C=new k;function D(e){var t=40,a=C.g2D.tangerine,n="star",c=0,o=.2,i=[0,0],s=!1;function r(e,t){return Math.floor(Math.random()*(t-e+1))+e}e.setup=function(){e.createCanvas(e.windowWidth,e.windowHeight,e.P2D),e.loop()},e.updateWithProps=function(e){e.gradient_flavor&&(a=C.g2D[e.gradient_flavor]),e.shape&&(n=e.shape),e.factor&&e.scale&&(o=e.factor/60*.25,t=-10*e.scale),s=e.pause},e.draw=function(){t>10?(t=10,o*=-1):t<0&&(t=0,o*=-1,i=[r(-e.width/2,e.width/2),r(-e.height/2,e.height/2)]),e.renderShape(),t+=o,c=(c+1)%a.length},e.renderShape=function(){switch(e.push(),e.translate(e.width/2,e.height/2),e.stroke(a[c]),e.strokeWeight(4),e.fill("black"),n){case"star":e.rotate(e.frameCount/-100),e.star(0,0,15*t,35*t,5);break;case"circle":e.ellipse(i[0],i[1],35*t,35*t),0===i[0]&&0===i[1]&&e.clear();break;case"square":e.rotate(e.frameCount/-100),e.square(0,0,35*t)}e.pop()},e.star=function(t,a,n,c,o){var i=e.TWO_PI/o,s=i/2;e.beginShape();for(var r=0;r<e.TWO_PI;r+=i){var l=t+e.cos(r)*c,d=a+e.sin(r)*c;e.vertex(l,d),l=t+e.cos(r+s)*n,d=a+e.sin(r+s)*n,e.vertex(l,d)}e.endShape(e.CLOSE)},e.mouseClicked=function(){s?e.noLoop():(e.loop(),e.clear())},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)}}function _(e){var t,a,n,c,o=C.g3D.rainbow,i="ball",s=0,r=10,l=[0,0],d=120,u=1,b=[],j=0,f=0,h=0;e.setup=function(){e.createCanvas(e.windowWidth,e.windowHeight,e.WEBGL),e.loop(),t=[0,75-e.height/2],l=[0,700-e.height/2],a=e.height/2,n=[0,0,0],b[0]=e.createCamera(),b[1]=e.createCamera(),b[2]=e.createCamera(),b[0].lookAt(500,0,0),b[1].lookAt(500,0,0),b[1].lookAt(500,0,0),b[1].pan(1.5),b[1].move(1e3,0,1e3),b[2].move(500,-1e3,0),b[2].tilt(1),e.setCamera(b[0])},e.updateWithProps=function(e){e.gradient_flavor&&(o=C.g3D[e.gradient_flavor],n=S()(o[h]).rgb().array()),e.shape&&(i=e.shape),e.factor&&(r=e.factor/60*.25*60),c=e.pause},e.draw=function(){e.orbitControl(),e.render3DShape(),b[0].move(0,0,5*Math.sin(e.frameCount/120)),b[1].move(0,0,5*Math.cos(e.frameCount/120)),b[2].move(0,0,5*Math.cos(e.frameCount/120)),e.frameCount%120===0&&(f=(f+1)%b.length,e.setCamera(b[f])),s=(s+1)%o.length},e.render3DShape=function(){e.background(S()(o[h]).darken(.7).rgb().string()),((a+=u*r)>e.height-384||a<384-e.height)&&(u*=-1,h=(h+1)%o.length,j=(j+1)%2,n=S()(o[h]).rgb().array()),e.specularColor.apply(e,Object(m.a)(n)),e.pointLight.apply(e,Object(m.a)(n).concat(Object(m.a)(t),[100])),e.specularColor.apply(e,Object(m.a)(n)),e.pointLight.apply(e,Object(m.a)(n).concat(Object(m.a)(l),[50])),e.ambientLight(50),e.shininess(255),e.noStroke(255);for(var c=0;c<o.length;c++)switch(e.push(),e.rotateX(.01*e.frameCount),e.translate(130,a),c%2===j?e.emissiveMaterial.apply(e,Object(m.a)(S()(o[c]).rgb().array())):e.specularMaterial.apply(e,Object(m.a)(S()(o[c]).rgb().array())),i){case"box":e.box(d);break;case"ball":e.sphere(d);break;case"donut":e.torus(d,15)}e.pop()},e.mouseClicked=function(){c?e.noLoop():e.loop()},e.doubleClicked=function(){var t=e.fullscreen();e.fullscreen(!t)},e.windowResized=function(){e.resizeCanvas(e.windowWidth,e.windowHeight)}}var P=a(100),I=a.n(P),A=a(198),N=a(56),T=a.n(N),L=a(1);function M(e){var t=Object(n.useState)(!0),a=Object(r.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(!1),s=Object(r.a)(i,2),l=s[0],d=s[1],b=Object(n.useState)(void 0),j=Object(r.a)(b,2),f=j[0],h=j[1],p=Object(n.useState)(!1),O=Object(r.a)(p,2),g=O[0],v=O[1],m=Object(n.useState)(0),x=Object(r.a)(m,2),y=x[0],k=x[1],w=Object(n.useRef)(void 0),S=Object(n.useState)(""),C=Object(r.a)(S,2),D=C[0],_=C[1],P=Object(n.useState)({id:"",name:"Not Checked",albumArt:"./sadface.png",uri:""}),I=Object(r.a)(P,2),M=I[0],E=I[1],W=Object(n.useState)({prevPlaying:"empty.png",nextPlaying:"empty.png"}),B=Object(r.a)(W,2),z=B[0],H=B[1],R=e.getCurrentInfo,q=e.setPauseAnimation,K=e.setDeviceId;return Object(n.useEffect)((function(){var e=document.createElement("script");e.src="https://sdk.scdn.co/spotify-player.js",e.async=!0,document.body.appendChild(e)}),[]),Object(n.useEffect)((function(){c||R(y)}),[y,R,c]),Object(n.useEffect)((function(){window.onSpotifyWebPlaybackSDKReady=function(){var t=new window.Spotify.Player({name:"Synesthesify",getOAuthToken:function(t){t(e.token)},volume:.5});h(t),t.addListener("ready",(function(e){var t=e.device_id;console.log("Ready with Device ID",t),_(t)})),t.addListener("not_ready",(function(e){var t=e.device_id;console.log("Device ID has gone offline",t)})),t.addListener("player_state_changed",(function(e){if(e){if(o(e.paused),!e.paused){var t=e.track_window.current_track,a=e.track_window.previous_tracks[0],n=e.track_window.next_tracks[0];k(e.position/1e3),console.log("Now playing - ".concat(t.name)),E({id:t.id,name:"".concat(t.name," - ").concat(t.artists[0].name),albumArt:t.album.images[0].url,uri:t.uri}),H({prevPlaying:a?null===a||void 0===a?void 0:a.album.images[0].url:"empty.png",nextPlaying:n?null===n||void 0===n?void 0:n.album.images[0].url:"empty.png"}),w.current&&clearInterval(w.current),v(!0),w.current=setInterval((function(){k((function(e){return e+2}))}),2e3)}d(!0)}else d(!1)})),t.connect()}}),[e.token]),l?(g&&(e.getAnalysisData(M.id),v(!1)),c&&w.current&&clearInterval(w.current),Object(L.jsxs)("div",{id:"playback",children:[Object(L.jsxs)("div",{children:["Now Playing: ",M.name]}),Object(L.jsxs)("div",{children:[Object(L.jsx)("img",{src:z.prevPlaying,alt:"Previous Album",style:{position:"relative",left:"51px",height:100,width:100}}),Object(L.jsx)("img",{src:M.albumArt,alt:"Album Art",style:{position:"relative",height:150,zIndex:1}}),Object(L.jsx)("img",{src:z.nextPlaying,alt:"Next Album",style:{position:"relative",left:"-48px",height:100,width:100}})]}),Object(L.jsx)(u.a,{variant:"success",id:"btn-spotify",hidden:c,onClick:function(){f.togglePlay(),q(!c)},children:Object(L.jsx)(T.a,{icon:"play_arrow",color:N.colorPalette.green._50})}),Object(L.jsx)(u.a,{variant:"secondary",id:"btn-spotify",hidden:!c,onClick:function(){f.togglePlay(),q(!c)},children:Object(L.jsx)(T.a,{icon:"pause",color:N.colorPalette.grey._900})})]})):Object(L.jsxs)("div",{id:"playback",children:[Object(L.jsx)(A.a,{animation:"border",variant:"light"})," ",Object(L.jsxs)("h4",{children:[" Waiting for connection... ",Object(L.jsx)("br",{})]}),Object(L.jsx)(u.a,{variant:"secondary",id:"start-playback",onClick:function(){K(D)},children:"Start"})]})}var E=new k,W=[204,404,403],B=new I.a;function z(e){return Object(L.jsxs)(d.a,Object(l.a)(Object(l.a)({},e),{},{size:"lg","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(L.jsx)(d.a.Header,{closeButton:!0,children:Object(L.jsx)(d.a.Title,{id:"contained-modal-title-vcenter",children:"Log in with Spotify"})}),Object(L.jsx)(d.a.Body,{children:Object(L.jsx)(u.a,{variant:"success",href:"http://localhost:8888/login",children:"Login"})})]}))}function H(e){return Object(L.jsxs)(d.a,Object(l.a)(Object(l.a)({},e),{},{size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0,children:[Object(L.jsx)(d.a.Header,{closeButton:!0,children:Object(L.jsx)(d.a.Title,{children:"Usage"})}),Object(L.jsx)(d.a.Body,{children:Object(L.jsxs)(b.a,{direction:"horizontal",gap:3,children:[Object(L.jsx)(j.a.Img,{variant:"top",src:"holder.js/100px180"}),Object(L.jsxs)(j.a.Body,{children:[Object(L.jsx)(j.a.Title,{children:"Card Title"}),Object(L.jsx)(j.a.Text,{children:"Some quick example text to build on the card title and make up the bulk of the card's content."})]}),Object(L.jsxs)(j.a.Body,{children:[Object(L.jsx)(j.a.Title,{children:"Card Title"}),Object(L.jsx)(j.a.Text,{children:"Some quick example text to build on the card title and make up the bulk of the card's content."})]}),Object(L.jsxs)(j.a.Body,{children:[Object(L.jsx)(j.a.Title,{children:"Card Title"}),Object(L.jsx)(j.a.Text,{children:"Some quick example text to build on the card title and make up the bulk of the card's content."})]})]})})]}))}var R=function(){var e=Object(n.useState)("rainbow"),t=Object(r.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)("box"),i=Object(r.a)(o,2),s=i[0],l=i[1],d=Object(n.useState)("s3D"),b=Object(r.a)(d,2),j=b[0],m=b[1],x=Object(n.useState)(!1),y=Object(r.a)(x,2),k=y[0],w=y[1],S=Object(n.useState)(!1),C=Object(r.a)(S,2),P=C[0],I=C[1],A=Object(n.useState)({}),N=Object(r.a)(A,2),T=N[0],R=N[1],q=Object(n.useState)({key:-1,loudness:0,tempo:0}),K=Object(r.a)(q,2),F=K[0],U=K[1],J=Object(n.useState)(""),G=Object(r.a)(J,2),V=G[0],X=G[1],Q=Object(n.useState)(!1),Y=Object(r.a)(Q,2),Z=Y[0],$=Y[1],ee=Object(n.useState)(!1),te=Object(r.a)(ee,2),ae=te[0],ne=te[1],ce=Object(n.useState)(""),oe=Object(r.a)(ce,2),ie=oe[0],se=oe[1],re=Object(n.useState)(0),le=Object(r.a)(re,2),de=le[0],ue=le[1],be=Object(n.useState)(!1),je=Object(r.a)(be,2),fe=je[0],he=je[1],pe=Object(n.useState)(1),Oe=Object(r.a)(pe,2),ge=Oe[0],ve=Oe[1],me=Object(n.useState)(0),xe=Object(r.a)(me,2),ye=xe[0],ke=xe[1],we=function(){var e,t={},a=/([^&;=]+)=?([^&;]*)/g,n=window.location.hash.substring(1);for(e=a.exec(n);e;)t[e[1]]=decodeURIComponent(e[2]),e=a.exec(n);return t}(),Se={s2D:["star","circle","square"],s3D:["box","ball","donut"]};return Object(n.useEffect)((function(){we.access_token&&(B.setAccessToken(we.access_token),se(we.access_token),B.setRefreshToken(we.refresh_token),ne(!0))}),[we]),Object(n.useEffect)((function(){B.transferMyPlayback([V]).then((function(e){B.play().then((function(){console.log("Playback started")}),(function(e){console.log("Error occured: ".concat(null===e||void 0===e?void 0:e.status," - ").concat(null===e||void 0===e?void 0:e.message))}))}),(function(e){console.log("Error occured: ".concat(null===e||void 0===e?void 0:e.status," - ").concat(null===e||void 0===e?void 0:e.message))}))}),[V]),Object(L.jsxs)("div",{className:"App",children:[Object(L.jsx)("header",{className:"App-header",children:Object(L.jsx)(f.a,{expand:"lg",variant:"dark",fixed:"top",children:Object(L.jsxs)(h.a,{children:[Object(L.jsx)(f.a.Brand,{className:"nav-brand",href:"/",children:"Synesthesify"}),Object(L.jsxs)(p.a,{className:"me-auto",children:[Object(L.jsxs)(O.a,{title:"Visual Mode",className:"nav-dropdown",onSelect:function(e){m(e),c("rainbow"),l(Se[e][0])},children:[Object(L.jsx)(O.a.Item,{className:"nav-drop-item",eventKey:"s2D",children:"2D Mode"}),Object(L.jsx)(O.a.Item,{className:"nav-drop-item",eventKey:"s3D",children:"3D Mode"})]}),Object(L.jsx)(O.a,{title:"Choose your flavor",className:"nav-dropdown",onSelect:function(e){return c(e)},children:"s2D"===j&&Object.keys(E.g2D).map((function(e){return Object(L.jsx)(O.a.Item,{className:"nav-drop-item",eventKey:e,children:e})}))||"s3D"===j&&Object.keys(E.g3D).map((function(e){return Object(L.jsx)(O.a.Item,{className:"nav-drop-item",eventKey:e,children:e})}))}),Object(L.jsx)(O.a,{title:"Choose your shape",className:"nav-dropdown",onSelect:function(e){return l(e)},children:Se[j].map((function(e){return Object(L.jsx)(O.a.Item,{className:"nav-drop-item",eventKey:e,children:e})}))}),Object(L.jsx)(p.a.Item,{className:"nav-link",children:Object(L.jsx)("p",{onClick:function(){return I(!0)},children:"Usage"})})]})]})})}),Object(L.jsxs)("body",{className:"App-body",children:[Object(L.jsx)("div",{id:"p5visual",children:"s2D"===j&&Object(L.jsx)(v.a,{sketch:D,gradient_flavor:a,shape:s,factor:F.tempo,scale:F.loudness,pause:Z})||"s3D"===j&&Object(L.jsx)(v.a,{sketch:_,gradient_flavor:a,shape:s,factor:F.tempo,scale:F.loudness,pause:Z})}),Object(L.jsx)(z,{show:k,onHide:function(){return w(!1)}}),Object(L.jsx)(H,{show:P,onHide:function(){return I(!1)}}),Object(L.jsxs)("div",{className:"sp-player",id:"now_playing",children:[ae&&Object(L.jsx)(g.a,{variant:"success",now:ye/ge*100,label:" \n          ".concat(Math.floor(ye/60),":").concat(ye%60<10?"0"+String(Math.floor(ye%60)):Math.floor(ye%60)," ")}),Object(L.jsx)(u.a,{variant:"success",hidden:ae,onClick:function(){return w(!0)},children:"Log in"}),ae&&Object(L.jsx)(M,{token:ie,getAnalysisData:function(e){var t,a;B.getAudioAnalysisForTrack(e).then((function(e){W.includes(e.statusCode)||(a=e.body.track.duration,t=e.body.sections,R(t),a>0&&ve(a),ue(0),he(!0))}),(function(e){console.log("Error occured: ".concat(null===e||void 0===e?void 0:e.status," - ").concat(null===e||void 0===e?void 0:e.message))}))},getCurrentInfo:function(e){if(T){var t=T[de];if(ke(e),t){var a=e>=t.start&&e<=t.start+t.duration;if(fe&&(U({key:t.key,loudness:t.loudness,tempo:t.tempo}),he(!1)),!a){var n=T.findIndex((function(t){return e>=t.start&&e<=t.start+t.duration}));ue(n),he(!0)}}}else U({key:-1,loudness:0,tempo:0})},setPauseAnimation:$,setDeviceId:X})]})]})]})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,207)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),o(e),i(e)}))};a(190);o.a.createRoot(document.getElementById("root")).render(Object(L.jsx)(i.a,{basename:"/synesthesify.github.io",children:Object(L.jsx)(s.c,{children:Object(L.jsx)(s.a,{path:"/",element:Object(L.jsx)(R,{})})})})),q()},81:function(e,t,a){}},[[191,1,2]]]);
//# sourceMappingURL=main.49e3f534.chunk.js.map